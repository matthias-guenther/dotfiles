# Basics {{{

set -g default-shell /bin/bash
set -g prefix C-a # remap of Prefix, -g says it's global to all sessions
unbind C-b        # the old Prefix mapping is gone, we can use it for a new command

set -sg escape-time 1 # more response when sending commands to tmux

set -g base-index 1 # windows start with index 1
setw -g pane-base-index 1 # panes also start with index 1
setw -g mode-keys vi # enable vi for buffer editing

set -g status-utf8 on # UTF-8 support

setw -g mode-mouse off # completely disable the mouse

set -g default-terminal "screen-256color" # tmux display things in 256 colors

set -g status-interval 60 # set the status-line renewal intervall to 60 seconds - saves resources

set -g status-justify centre # centering the windows list

# }}}
# Own mappings {{{
# 'Prefix r' to reload the tmux.conf {{{

bind r source-file ~/.tmux.conf \; display "Reloaded!"

# }}}
# 'Prefix a' twice will send the command throughout tmux to other programms {{{

bind C-a send-prefix

# }}}
# Window splitting: - ... vertical; | ... horizontal {{{

bind | split-window -h
bind - split-window -v

# }}}
# h,j,k,l mappings to move around in panes {{{

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# }}}
# H,J,K,L mappings for resizing panes {{{
# the -r options let's repeat the Prefix key only once and the defined key within a repeat time (500 # ms)

bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# }}}
# Remapping copy and paste keys for vim {{{
  # - Prefix Escape ... brings you to copy mode
  # - v ... go into Visual mode
  # - y ... yanks the text into the buffer
  # - p ... paste the text

unbind [
bind Escape copy-mode
unbind p
bind p paste-buffer
bind -t vi-copy 'v' begin-selection
bind -t vi-copy 'y' copy-selection

# }}}
# Clipboard and Linux {{{
# 'Prefix <C-c>' copy the current buffer to clipboad {{{
bind C-c run "tmux save-buffer - | xclip -i -sel clipboard"

# }}}
# 'Prefix <C-v>' paste text from system clipboad into tmux session {{{
bind C-v run "tmux set-buffer \"$(xclip -o -sel clipboard)\"; tmux paste-buffer"
# }}}
# }}}
# Focussing single panes {{{
  # 'Prefix Up' ... will open a new window with the pane
  # 'Prefix Down' ... will the temporary window
unbind Up
bind Up new-window -d -n tmp \; swap-pane -s tmp.1 \; select-window -t tmp
unbind Down
bind Down last-window \; swap-pane -s tmp.1 \; kill-window -t tmp
# }}}
# }}}
# Coloring and style of windows and panes {{{
# color: white text on black background for status messages {{{

set -g status-fg white
set -g status-bg black

# }}}
# active window is red and the other are cyan {{{

setw -g window-status-fg cyan
setw -g window-status-bg default
setw -g window-status-attr dim

setw -g window-status-current-fg white
setw -g window-status-current-bg red
setw -g window-status-current-attr bright

# }}}
# changing pane divider colors {{{

set -g pane-border-fg green
set -g pane-border-bg black
set -g pane-active-border-fg white
set -g pane-active-border-bg yellow

# }}}
# customizing the tmux command and status line {{{

set -g message-fg white
set -g message-bg black
set -g message-attr bright

# }}}
# }}}
# Customizing status bar {{{
  # actual left-status: session <number> <Windows-Index> <Pane-Index>
  # actual right-status: Discharging Charging <day> <month> <time>

set -g status-left-length 40
set -g status-left "#[fg=green][Session: #S #[fg=yellow]#I #[fg=cyan]#P#[fg=green]]"

set -g status-right "$(~/bin/battery Discharging; ~/bin/battery Charging) #[fg=cyan]%d %b %R"

# }}}
# Identifying activity in other windows {{{

setw -g monitor-activity on
set -g visual-activity on

# }}}

